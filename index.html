<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ShopLifted</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body class="min-h-screen flex flex-col bg-white">

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-20 right-6 bg-black text-white px-6 py-3 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 z-50">
        <p class="text-sm font-light">Item added to bag</p>
    </div>

    <!-- Header-->
    <header class="sticky top-0 z-50 bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-6 py-5 flex items-center justify-between">
            
            <!-- Logo --> 
            <div class="flex-1">
                <h1 id="nav-logo" class="text-xl font-light tracking-widest cursor-pointer uppercase text-black flex items-center gap-3">
                    <svg class="w-7 h-7" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"> 
                        <rect x="10" y="14" width="28" height="28" rx="2"
                            stroke="#000000" stroke-width="1.5" fill="none"/>
                        <path d="M16 14 C16 8, 32 8, 32 14" 
                            stroke="#000000" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                        <path d="M24 30 L24 20" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M18 24 L24 18 L30 24" 
                            stroke="#000000" stroke-width="1.5" stroke-linecap="round" fill="none"/>
                    </svg>
                    ShopLifted
                </h1>
            </div>

            <!-- Navigation Bar -->
            <nav class="hidden md:flex space-x-10 text-xs font-light uppercase tracking-wider text-gray-700">
                <button id="nav-home" class="hover:text-black transition-colors">HOME</button>
                <button id="nav-men" class="hover:text-black transition-colors">MEN</button>
                <button id="nav-women" class="hover:text-black transition-colors">WOMEN</button>
                <button id="nav-browse" class="hover:text-black transition-colors">BROWSE</button>
                <button id="nav-about" class="hover:text-black transition-colors">ABOUT</button>
            </nav>

            <!-- Cart & Mobile Menu -->
            <div class="flex-1 flex justify-end items-center space-x-6">
                <button id="nav-cart" class="relative text-xs font-light uppercase tracking-wider text-gray-700 hover:text-black transition-colors">
                    Bag
                    <span id="cart-count" class="ml-2 text-xs font-light">
                        (0)
                    </span>
                </button>
                
                <!-- Hamburger -->
                <button id="mobile-menu-toggle" class="md:hidden text-black">
                    <span class="hamburger-line top-line block w-5 h-px bg-current transition-all duration-300 mb-1"></span>
                    <span class="hamburger-line middle-line block w-5 h-px bg-current transition-all duration-300 mb-1"></span>
                    <span class="hamburger-line bottom-line block w-5 h-px bg-current transition-all duration-300"></span>
                </button>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <nav id="mobile-menu" class="md:hidden bg-white border-t border-gray-200 hidden">
            <div class="px-6 py-4 space-y-3">
                <button id="mobile-nav-home" class="block w-full text-left py-2 text-sm uppercase tracking-wider text-gray-700 hover:text-black">Home</button>
                <button id="mobile-nav-men" class="block w-full text-left py-2 text-sm uppercase tracking-wider text-gray-700 hover:text-black">Men</button>
                <button id="mobile-nav-women" class="block w-full text-left py-2 text-sm uppercase tracking-wider text-gray-700 hover:text-black">Women</button>
                <button id="mobile-nav-browse" class="block w-full text-left py-2 text-sm uppercase tracking-wider text-gray-700 hover:text-black">Browse</button>
                <button id="mobile-nav-about" class="block w-full text-left py-2 text-sm uppercase tracking-wider text-gray-700 hover:text-black">About</button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="flex-grow">
        
        <!-- Home View -->
        <div id="home-view">
            <!-- Hero Section -->
            <section class="relative h-screen max-h-[800px] flex items-center justify-center bg-gray-50">
                <div class="absolute inset-0 bg-cover bg-center" 
                     style="background-image: url('https://images.unsplash.com/photo-1490578474895-699cd4e2cf59?w=1600&q=80'); filter: brightness(0.95);">
                </div>
                <div class="absolute inset-0 bg-black/10"></div>
                
                <div class="relative z-10 text-center text-white px-6 max-w-2xl mx-auto">
                    <h1 class="text-5xl md:text-7xl font-light mb-6 tracking-tight">
                        Elevated By Design
                    </h1>
                    <p class="text-sm md:text-base font-light tracking-wide mb-10 uppercase">
                        A Curated Selection for the Discerning Individual
                    </p>
                    <button class="px-10 py-3 bg-white text-black text-xs uppercase tracking-widest font-light border border-white hover:bg-transparent hover:text-white transition-all duration-300">
                        Discover
                    </button>
                </div>
            </section>

            <!-- Categories Section -->
            <section class="max-w-7xl mx-auto px-6 py-24">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-light tracking-tight mb-3 text-black">
                        Shop by Category
                    </h2>
                    <div class="w-12 h-px bg-black mx-auto"></div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Men's Category -->
                    <div id="category-men" class="relative group overflow-hidden cursor-pointer aspect-[3/4]"
                        style="background-image: url('https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&q=80'); background-size: cover; background-position: center;">
                        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/30 transition-all duration-500"></div>
                        <div class="absolute inset-0 flex flex-col items-center justify-end pb-12">
                            <h3 class="text-4xl md:text-5xl font-light text-white mb-4 tracking-wide">Men</h3>
                            <div class="w-0 h-px bg-white group-hover:w-16 transition-all duration-500"></div>
                        </div>
                    </div>

                    <!-- Women's Category -->
                    <div id="category-women" class="relative group overflow-hidden cursor-pointer aspect-[3/4]"
                        style="background-image: url('https://images.unsplash.com/photo-1531123897727-8f129e1688ce?w=800&q=80'); background-size: cover; background-position: center;">
                        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/30 transition-all duration-500"></div>
                        <div class="absolute inset-0 flex flex-col items-center justify-end pb-12">
                            <h3 class="text-4xl md:text-5xl font-light text-white mb-4 tracking-wide">Women</h3>
                            <div class="w-0 h-px bg-white group-hover:w-16 transition-all duration-500"></div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Men's View -->
        <div id="men-view" class="hidden">
            <section class="relative h-96 md:h-[500px] bg-gray-50">
                <div class="absolute inset-0 bg-cover bg-center" 
                     style="background-image: url('https://images.unsplash.com/photo-1617127365659-c47fa864d8bc?w=1600&q=80');">
                </div>
                <div class="absolute inset-0 bg-black/30"></div>
                <div class="relative z-10 flex items-center justify-center h-full">
                    <h1 class="text-5xl md:text-6xl font-light text-white tracking-tight">Men</h1>
                </div>
            </section>

            <section class="max-w-7xl mx-auto px-6 py-20">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="group cursor-pointer product-card" data-product="mens-outerwear">
                        <div class="aspect-square bg-gray-100 mb-4 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1551028719-00167b16eac5?w=400&q=80" alt="Outerwear" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light">Outerwear</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="mens-tops">
                        <div class="aspect-square bg-gray-100 mb-4 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1618354691373-d851c5c3a990?w=400&q=80" alt="Tops" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light">Tops</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="mens-bottoms">
                        <div class="aspect-square bg-gray-100 mb-4 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?w=400&q=80" alt="Bottoms" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light">Bottoms</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="mens-shoes">
                        <div class="aspect-square bg-gray-100 mb-4 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1549298916-b41d501d3772?w=400&q=80" alt="Shoes" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light">Shoes</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="mens-accessories">
                        <div class="aspect-square bg-gray-100 mb-4 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1609587312208-cea54be969e7?w=400&q=80" alt="Accessories" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light">Accessories</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="mens-bags">
                        <div class="aspect-square bg-gray-100 mb-4 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400&q=80" alt="Bags" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light">Bags</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="mens-watches">
                        <div class="aspect-square bg-gray-100 mb-4 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1523170335258-f5ed11844a49?w=400&q=80" alt="Watches" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light">Watches</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="mens-jewelry">
                        <div class="aspect-square bg-gray-100 mb-4 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=800&q=80" alt="Jewelry" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light">Jewelry</h3>
                    </div>
                </div>
            </section>
        </div>

        <!-- Women's View -->
        <div id="women-view" class="hidden">
            <section class="relative h-96 md:h-[500px] bg-gray-50">
                <div class="absolute inset-0 bg-cover bg-center" 
                     style="background-image: url('https://images.unsplash.com/photo-1483985988355-763728e1935b?w=1600&q=80');">
                </div>
                <div class="absolute inset-0 bg-rose-900/30"></div>
                <div class="relative z-10 flex items-center justify-center h-full">
                    <h1 class="text-5xl md:text-6xl font-light text-white tracking-tight">Women</h1>
                </div>
            </section>

            <section class="max-w-7xl mx-auto px-6 py-20 bg-rose-50/30">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="group cursor-pointer product-card" data-product="womens-dresses">
                        <div class="aspect-square bg-rose-100/50 mb-4 overflow-hidden border border-rose-200">
                            <img src="https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=400&q=80" alt="Dresses" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light text-rose-900">Dresses</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="womens-tops">
                        <div class="aspect-square bg-rose-100/50 mb-4 overflow-hidden border border-rose-200">
                            <img src="https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400&q=80" alt="Tops" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light text-rose-900">Tops</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="womens-bottoms">
                        <div class="aspect-square bg-rose-100/50 mb-4 overflow-hidden border border-rose-200">
                            <img src="https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=400&q=80" alt="Bottoms" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light text-rose-900">Bottoms</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="womens-shoes">
                        <div class="aspect-square bg-rose-100/50 mb-4 overflow-hidden border border-rose-200">
                            <img src="https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=400&q=80" alt="Shoes" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light text-rose-900">Shoes</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="womens-accessories">
                        <div class="aspect-square bg-rose-100/50 mb-4 overflow-hidden border border-rose-200">
                            <img src="https://images.unsplash.com/photo-1611652022419-a9419f74343d?w=400&q=80" alt="Accessories" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light text-rose-900">Accessories</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="womens-bags">
                        <div class="aspect-square bg-rose-100/50 mb-4 overflow-hidden border border-rose-200">
                            <img src="https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=400&q=80" alt="Bags" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light text-rose-900">Bags</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="womens-jewelry">
                        <div class="aspect-square bg-rose-100/50 mb-4 overflow-hidden border border-rose-200">
                            <img src="https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?w=400&q=80" alt="Jewelry" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light text-rose-900">Jewelry</h3>
                    </div>

                    <div class="group cursor-pointer product-card" data-product="womens-handbags">
                        <div class="aspect-square bg-rose-100/50 mb-4 overflow-hidden border border-rose-200">
                            <img src="https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&q=80" alt="Handbags" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm uppercase tracking-wider text-center font-light text-rose-900">Handbags</h3>
                    </div>
                </div>
            </section>
        </div>

        <!-- Product View -->
        <div id="product-view" class="hidden">
            <!-- Breadcrumb -->
            <div class="max-w-7xl mx-auto px-6 py-6">
                <nav class="text-xs uppercase tracking-wider text-gray-500">
                    <span id="breadcrumb-home" class="hover:text-black cursor-pointer">Home</span>
                    <span class="mx-2">></span>
                    <span id="breadcrumb-gender" class="hover:text-black cursor-pointer">Gender</span>
                    <span class="mx-2">></span>
                    <span id="breadcrumb-category" class="hover:text-black cursor-pointer">Category</span>
                    <span class="mx-2">></span>
                    <span id="breadcrumb-product" class="text-black">Product</span>
                </nav>
            </div>

            <!-- Product Details -->
            <section class="max-w-7xl mx-auto px-6 py-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                    <!-- Images -->
                    <div>
                        <div class="aspect-square bg-gray-100 mb-4">
                            <img id="product-main-image" src="https://via.placeholder.com/800x800" alt="Product" class="w-full h-full object-cover">
                        </div>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="aspect-square bg-gray-100 cursor-pointer product-thumb">
                                <img src="https://via.placeholder.com/300x300" alt="Thumbnail" class="w-full h-full object-cover">
                            </div>
                            <div class="aspect-square bg-gray-100 cursor-pointer product-thumb">
                                <img src="https://via.placeholder.com/300x300" alt="Thumbnail" class="w-full h-full object-cover">
                            </div>
                            <div class="aspect-square bg-gray-100 cursor-pointer product-thumb">
                                <img src="https://via.placeholder.com/300x300" alt="Thumbnail" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </div>

                    <!-- Details -->
                    <div>
                        <h1 id="product-title" class="text-3xl font-light tracking-tight mb-4">Premium Jacket</h1>
                        <p id="product-price" class="text-2xl font-light mb-6">$299.00</p>
                        <p id="product-description" class="text-sm font-light text-gray-600 mb-6 leading-relaxed">
                            Crafted from premium materials with meticulous attention to detail. This piece combines timeless elegance with modern sophistication.
                        </p>
                        
                        <div class="mb-6">
                            <p class="text-xs uppercase tracking-wider text-gray-500 mb-2">Material</p>
                            <p id="product-material" class="text-sm font-light">100% Premium Cotton</p>
                        </div>

                        <div class="mb-6">
                            <p class="text-xs uppercase tracking-wider text-gray-500 mb-3">Size</p>
                            <div class="flex gap-3">
                                <button class="size-btn w-12 h-12 border border-gray-300 text-sm font-light hover:border-black transition-colors" data-size="XS">XS</button>
                                <button class="size-btn w-12 h-12 border border-gray-300 text-sm font-light hover:border-black transition-colors" data-size="S">S</button>
                                <button class="size-btn w-12 h-12 border border-gray-300 text-sm font-light hover:border-black transition-colors" data-size="M">M</button>
                                <button class="size-btn w-12 h-12 border border-gray-300 text-sm font-light hover:border-black transition-colors" data-size="L">L</button>
                                <button class="size-btn w-12 h-12 border border-gray-300 text-sm font-light hover:border-black transition-colors" data-size="XL">XL</button>
                            </div>
                        </div>

                        <div class="mb-6">
                            <p class="text-xs uppercase tracking-wider text-gray-500 mb-3">Color</p>
                            <div class="flex gap-3">
                                <button class="color-btn w-12 h-12 bg-gray-800 border-2 border-transparent hover:border-black transition-colors" data-color="Black"></button>
                                <button class="color-btn w-12 h-12 bg-white border-2 border-gray-300 hover:border-black transition-colors" data-color="White"></button>
                                <button class="color-btn w-12 h-12 bg-blue-600 border-2 border-transparent hover:border-black transition-colors" data-color="Blue"></button>
                            </div>
                        </div>

                        <div class="mb-8">
                            <p class="text-xs uppercase tracking-wider text-gray-500 mb-3">Quantity</p>
                            <input type="number" id="product-quantity" value="1" min="1" class="w-24 px-4 py-2 border border-gray-300 text-sm font-light">
                        </div>

                        <button id="add-to-cart-btn" class="w-full py-4 bg-black text-white text-xs uppercase tracking-widest font-light hover:bg-gray-800 transition-colors">
                            + Add to Bag
                        </button>
                    </div>
                </div>

                <!-- Related Products -->
                <div class="mt-20">
                    <h2 class="text-2xl font-light tracking-tight mb-8 text-center">You May Also Like</h2>
                    <div id="related-products-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <!-- Related products will be dynamically inserted here -->
                    </div>
                </div>
            </section>
        </div>

        <!-- Cart View (at bottom of main) -->
        <div id="cart-view" class="hidden px-6 py-12 max-w-7xl mx-auto">
            <h1 class="text-3xl font-light mb-8 text-center">Shopping Cart</h1>

            <!-- Cart Items -->
            <div id="cart-items-container" class="mb-6"></div>

            <!-- Empty Cart Message -->
            <p id="empty-cart-msg" class="text-gray-600 text-sm text-center hidden">
                Your bag is currently empty.
            </p>

            <!-- Shipping + Summary -->
            <div id="shipping-section" class="mt-10 grid grid-cols-1 md:grid-cols-2 gap-12 hidden">
                <!-- Shipping Options -->
                <div>
                    <h2 class="text-lg font-light mb-4">Shipping</h2>

                    <label class="block text-xs uppercase tracking-wider text-gray-500 mb-2">Method</label>
                    <select id="shipping-type" class="border border-gray-300 px-3 py-2 w-full text-sm mb-4">
                        <option value="">Select Shipping</option>
                        <option value="standard">Standard</option>
                        <option value="express">Express</option>
                        <option value="priority">Priority</option>
                    </select>

                    <label class="block text-xs uppercase tracking-wider text-gray-500 mb-2">Destination</label>
                    <select id="shipping-destination" class="border border-gray-300 px-3 py-2 w-full text-sm">
                        <option value="">Select Destination</option>
                        <option value="CA">Canada</option>
                        <option value="US">United States</option>
                        <option value="INT">International</option>
                    </select>
                </div>

                <!-- Summary -->
                <div>
                    <h2 class="text-lg font-light mb-4">Summary</h2>

                    <div class="border border-gray-200 p-6 text-sm space-y-3">
                        <div class="flex justify-between">
                            <span>Merchandise</span>
                            <span id="summary-merch">$0.00</span>
                        </div>

                        <div class="flex justify-between">
                            <span>Shipping</span>
                            <span id="summary-shipping">$0.00</span>
                        </div>

                        <div class="flex justify-between">
                            <span>Tax</span>
                            <span id="summary-tax">$0.00</span>
                        </div>

                        <hr>

                        <div class="flex justify-between font-medium text-lg">
                            <span>Total</span>
                            <span id="summary-total">$0.00</span>
                        </div>
                    </div>

                    <button id="checkout-btn" class="mt-6 w-full py-3 bg-black text-white uppercase tracking-wider text-xs hover:bg-gray-800 transition-colors">
                        Checkout
                    </button>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="border-t border-gray-200 py-12 mt-auto bg-white">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center">
                <h2 class="text-lg font-light tracking-widest uppercase mb-6 text-black">ShopLifted</h2>
                <div class="flex justify-center space-x-8 mb-8 text-xs uppercase tracking-wider text-gray-600">
                    <a href="#" class="hover:text-black transition-colors">Contact</a>
                    <a href="#" class="hover:text-black transition-colors">Privacy</a>
                    <a href="#" class="hover:text-black transition-colors">Terms</a>
                </div>
                <p class="text-xs text-gray-500 font-light">
                    Â© 2025 ShopLifted. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Cart & view state
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let currentView = 'home-view';
        let currentGender = '';
        let selectedSize = '';
        let selectedColor = '';
        let currentProductId = null;

        // Product Database
        const products = {
            'mens-outerwear': {
                title: 'Premium Wool Overcoat',
                price: '$599.00',
                description: 'Expertly tailored from Italian wool, this overcoat epitomizes sophisticated elegance. Features a sleek silhouette with notched lapels and a double-breasted design.',
                material: '100% Italian Wool',
                image: 'https://images.unsplash.com/photo-1551028719-00167b16eac5?w=800&q=80',
                category: 'Outerwear',
                gender: 'Men'
            },
            'mens-tops': {
                title: 'Essential Cotton T-Shirt',
                price: '$89.00',
                description: 'Premium cotton construction with a refined fit. This wardrobe staple combines comfort with contemporary style, perfect for layering or wearing solo.',
                material: '100% Organic Cotton',
                image: 'https://images.unsplash.com/photo-1618354691373-d851c5c3a990?w=800&q=80',
                category: 'Tops',
                gender: 'Men'
            },
            'mens-bottoms': {
                title: 'Tailored Denim Jeans',
                price: '$199.00',
                description: 'Classic five-pocket design in premium selvedge denim. Contemporary slim fit with exceptional attention to detail and finishing.',
                material: 'Japanese Selvedge Denim',
                image: 'https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?w=800&q=80',
                category: 'Bottoms',
                gender: 'Men'
            },
            'mens-shoes': {
                title: 'Leather Sneakers',
                price: '$349.00',
                description: 'Handcrafted Italian leather sneakers featuring a minimalist design. Premium construction meets modern comfort in this versatile silhouette.',
                material: 'Italian Leather',
                image: 'https://images.unsplash.com/photo-1549298916-b41d501d3772?w=800&q=80',
                category: 'Shoes',
                gender: 'Men'
            },
            'mens-accessories': {
                title: 'Designer Sunglasses',
                price: '$279.00',
                description: 'Contemporary aviator frames with UV protection. Acetate construction with subtle branded detailing and premium metal accents.',
                material: 'Acetate & Stainless Steel',
                image: 'https://images.unsplash.com/photo-1609587312208-cea54be969e7?w=800&q=80',
                category: 'Accessories',
                gender: 'Men'
            },
            'mens-bags': {
                title: 'Leather Messenger Bag',
                price: '$499.00',
                description: 'Full-grain leather messenger bag with multiple compartments. Features adjustable strap and reinforced stitching for durability.',
                material: 'Full-Grain Leather',
                image: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=800&q=80',
                category: 'Bags',
                gender: 'Men'
            },
            'mens-watches': {
                title: 'Automatic Watch',
                price: '$899.00',
                description: 'Swiss-made automatic movement with sapphire crystal. Features date display, luminous hands, and water resistance to 100m.',
                material: 'Stainless Steel',
                image: 'https://images.unsplash.com/photo-1523170335258-f5ed11844a49?w=800&q=80',
                category: 'Watches',
                gender: 'Men'
            },
            'mens-jewelry': {
                title: 'Sterling Silver Ring',
                price: '$169.00',
                description: 'Contemporary signet ring crafted from sterling silver. Minimalist design with brushed finish and subtle engraving detail.',
                material: 'Sterling Silver',
                image: 'https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=800&q=80',
                category: 'Jewelry',
                gender: 'Men'
            },
            'womens-dresses': {
                title: 'Silk Midi Dress',
                price: '$449.00',
                description: 'Flowing silk dress with elegant draping. Features a flattering A-line silhouette, perfect for both day and evening wear.',
                material: '100% Silk',
                image: 'https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=800&q=80',
                category: 'Dresses',
                gender: 'Women'
            },
            'womens-tops': {
                title: 'Cashmere Sweater',
                price: '$329.00',
                description: 'Luxuriously soft cashmere knit in a timeless crew neck silhouette. Lightweight yet warm, perfect for layering or wearing alone.',
                material: '100% Cashmere',
                image: 'https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=800&q=80',
                category: 'Tops',
                gender: 'Women'
            },
            'womens-bottoms': {
                title: 'High-Waist Trousers',
                price: '$249.00',
                description: 'Tailored high-waist trousers in premium wool blend. Features pleated front and tapered leg for a sophisticated silhouette.',
                material: 'Wool Blend',
                image: 'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=800&q=80',
                category: 'Bottoms',
                gender: 'Women'
            },
            'womens-shoes': {
                title: 'Leather Pumps',
                price: '$399.00',
                description: 'Classic pointed-toe pumps in supple leather. 3-inch heel provides elegant height while maintaining all-day comfort.',
                material: 'Premium Leather',
                image: 'https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=800&q=80',
                category: 'Shoes',
                gender: 'Women'
            },
            'womens-accessories': {
                title: 'Silk Scarf',
                price: '$189.00',
                description: 'Hand-rolled silk scarf featuring an exclusive print. Versatile accessory that adds sophistication to any ensemble.',
                material: '100% Silk',
                image: 'https://images.unsplash.com/photo-1611652022419-a9419f74343d?w=800&q=80',
                category: 'Accessories',
                gender: 'Women'
            },
            'womens-bags': {
                title: 'Structured Tote',
                price: '$549.00',
                description: 'Refined leather tote with structured silhouette. Features interior pockets, top handles, and optional shoulder strap.',
                material: 'Saffiano Leather',
                image: 'https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=800&q=80',
                category: 'Bags',
                gender: 'Women'
            },
            'womens-jewelry': {
                title: 'Pearl Necklace',
                price: '$679.00',
                description: 'Cultured pearl strand with 14k gold clasp. Timeless elegance featuring lustrous pearls in graduated sizes.',
                material: 'Cultured Pearls & 14k Gold',
                image: 'https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?w=800&q=80',
                category: 'Jewelry',
                gender: 'Women'
            },
            'womens-handbags': {
                title: 'Designer Crossbody',
                price: '$629.00',
                description: 'Compact crossbody bag with chain strap detail. Features quilted leather construction and signature hardware.',
                material: 'Quilted Leather',
                image: 'https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=800&q=80',
                category: 'Handbags',
                gender: 'Women'
            }
        };

        // Related Products Database
        const relatedProducts = {
            /* (unchanged, same as before) */
            'mens-outerwear': [
                { id: 'mens-outerwear-r1', title: 'Leather Bomber Jacket', price: '$449.00', image: 'https://images.unsplash.com/photo-1520975954732-35dd22299614?w=400&q=80' },
                { id: 'mens-outerwear-r2', title: 'Cashmere Scarf', price: '$129.00', image: 'https://images.unsplash.com/photo-1520903920243-00d872a2d1c9?w=400&q=80' },
                { id: 'mens-outerwear-r3', title: 'Wool Beanie', price: '$59.00', image: 'https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?w=400&q=80' },
                { id: 'mens-outerwear-r4', title: 'Leather Gloves', price: '$89.00', image: 'https://images.unsplash.com/photo-1531120364508-a6b656c3e78d?w=400&q=80' }
            ],
            'mens-tops': [
                { id: 'mens-tops-r1', title: 'Oxford Button-Down', price: '$119.00', image: 'https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=400&q=80' },
                { id: 'mens-tops-r2', title: 'Linen Polo Shirt', price: '$99.00', image: 'https://images.unsplash.com/photo-1625910513413-5fc45ec17e36?w=400&q=80' },
                { id: 'mens-tops-r3', title: 'Merino Wool Sweater', price: '$179.00', image: 'https://images.unsplash.com/photo-1638643391904-9b551ba91eaa?w=400&q=80' },
                { id: 'mens-tops-r4', title: 'Henley Long Sleeve', price: '$79.00', image: 'https://images.unsplash.com/photo-1529374255404-311a2a4f1fd9?w=400&q=80' }
            ],
            'mens-bottoms': [
                { id: 'mens-bottoms-r1', title: 'Chino Trousers', price: '$149.00', image: 'https://images.unsplash.com/photo-1473966968600-fa801b869a1a?w=400&q=80' },
                { id: 'mens-bottoms-r2', title: 'Tailored Shorts', price: '$89.00', image: 'https://images.unsplash.com/photo-1591195853828-11db59a44f6b?w=400&q=80' },
                { id: 'mens-bottoms-r3', title: 'Wool Dress Pants', price: '$229.00', image: 'https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=400&q=80' },
                { id: 'mens-bottoms-r4', title: 'Leather Belt', price: '$79.00', image: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400&q=80' }
            ],
            'mens-shoes': [
                { id: 'mens-shoes-r1', title: 'Oxford Dress Shoes', price: '$399.00', image: 'https://images.unsplash.com/photo-1614252369475-531eba835eb1?w=400&q=80' },
                { id: 'mens-shoes-r2', title: 'Suede Loafers', price: '$279.00', image: 'https://images.unsplash.com/photo-1626379801357-536eb5252883?w=400&q=80' },
                { id: 'mens-shoes-r3', title: 'Chelsea Boots', price: '$449.00', image: 'https://images.unsplash.com/photo-1638953719915-525d76cba56c?w=400&q=80' },
                { id: 'mens-shoes-r4', title: 'Canvas Sneakers', price: '$129.00', image: 'https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?w=400&q=80' }
            ],
            'mens-accessories': [
                { id: 'mens-accessories-r1', title: 'Aviator Sunglasses', price: '$199.00', image: 'https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400&q=80' },
                { id: 'mens-accessories-r2', title: 'Leather Wallet', price: '$149.00', image: 'https://images.unsplash.com/photo-1627123424574-724758594e93?w=400&q=80' },
                { id: 'mens-accessories-r3', title: 'Silk Tie', price: '$89.00', image: 'https://images.unsplash.com/photo-1589756823695-278bc923a959?w=400&q=80' },
                { id: 'mens-accessories-r4', title: 'Cufflinks Set', price: '$129.00', image: 'https://images.unsplash.com/photo-1590548784585-643d2b9f2925?w=400&q=80' }
            ],
            'mens-bags': [
                { id: 'mens-bags-r1', title: 'Leather Briefcase', price: '$599.00', image: 'https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=400&q=80' },
                { id: 'mens-bags-r2', title: 'Canvas Backpack', price: '$199.00', image: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400&q=80' },
                { id: 'mens-bags-r3', title: 'Weekend Duffle', price: '$349.00', image: 'https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=400&q=80' },
                { id: 'mens-bags-r4', title: 'Laptop Sleeve', price: '$99.00', image: 'https://images.unsplash.com/photo-1603899122634-f086ca5f5ddd?w=400&q=80' }
            ],
            'mens-watches': [
                { id: 'mens-watches-r1', title: 'Chronograph Watch', price: '$1,299.00', image: 'https://images.unsplash.com/photo-1587925358603-c2eea5305bbc?w=400&q=80' },
                { id: 'mens-watches-r2', title: 'Minimalist Watch', price: '$449.00', image: 'https://images.unsplash.com/photo-1524592094714-0f0654e20314?w=400&q=80' },
                { id: 'mens-watches-r3', title: 'Dive Watch', price: '$799.00', image: 'https://images.unsplash.com/photo-1548171915-e79a380a2a4b?w=400&q=80' },
                { id: 'mens-watches-r4', title: 'Leather Watch Strap', price: '$79.00', image: 'https://images.unsplash.com/photo-1619134778706-7015533a6150?w=400&q=80' }
            ],
            'mens-jewelry': [
                { id: 'mens-jewelry-r1', title: 'Gold Chain Necklace', price: '$299.00', image: 'https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?w=400&q=80' },
                { id: 'mens-jewelry-r2', title: 'Leather Bracelet', price: '$89.00', image: 'https://images.unsplash.com/photo-1611652022419-a9419f74343d?w=400&q=80' },
                { id: 'mens-jewelry-r3', title: 'Onyx Cufflinks', price: '$179.00', image: 'https://images.unsplash.com/photo-1590548784585-643d2b9f2925?w=400&q=80' },
                { id: 'mens-jewelry-r4', title: 'Titanium Ring', price: '$199.00', image: 'https://images.unsplash.com/photo-1605100804763-247f67b3557e?w=400&q=80' }
            ],
            'womens-dresses': [
                { id: 'womens-dresses-r1', title: 'Maxi Wrap Dress', price: '$349.00', image: 'https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?w=400&q=80' },
                { id: 'womens-dresses-r2', title: 'Cocktail Dress', price: '$399.00', image: 'https://images.unsplash.com/photo-1566174053879-31528523f8ae?w=400&q=80' },
                { id: 'womens-dresses-r3', title: 'Statement Earrings', price: '$149.00', image: 'https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?w=400&q=80' },
                { id: 'womens-dresses-r4', title: 'Strappy Heels', price: '$329.00', image: 'https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=400&q=80' }
            ],
            'womens-tops': [
                { id: 'womens-tops-r1', title: 'Silk Blouse', price: '$249.00', image: 'https://images.unsplash.com/photo-1564257631407-4deb1f99d992?w=400&q=80' },
                { id: 'womens-tops-r2', title: 'Cropped Cardigan', price: '$189.00', image: 'https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400&q=80' },
                { id: 'womens-tops-r3', title: 'Ribbed Tank Top', price: '$69.00', image: 'https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=400&q=80' },
                { id: 'womens-tops-r4', title: 'Layering Necklace', price: '$129.00', image: 'https://images.unsplash.com/photo-1599643477877-530eb83abc8e?w=400&q=80' }
            ],
            'womens-bottoms': [
                { id: 'womens-bottoms-r1', title: 'Wide Leg Pants', price: '$199.00', image: 'https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=400&q=80' },
                { id: 'womens-bottoms-r2', title: 'Pleated Skirt', price: '$179.00', image: 'https://images.unsplash.com/photo-1583496661160-fb5886a0aaaa?w=400&q=80' },
                { id: 'womens-bottoms-r3', title: 'Leather Belt', price: '$99.00', image: 'https://images.unsplash.com/photo-1624222247344-550fb60583dc?w=400&q=80' },
                { id: 'womens-bottoms-r4', title: 'Ankle Boots', price: '$349.00', image: 'https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=400&q=80' }
            ],
            'womens-shoes': [
                { id: 'womens-shoes-r1', title: 'Ballet Flats', price: '$249.00', image: 'https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=400&q=80' },
                { id: 'womens-shoes-r2', title: 'Platform Sandals', price: '$299.00', image: 'https://images.unsplash.com/photo-1603808033192-082d6919d3e1?w=400&q=80' },
                { id: 'womens-shoes-r3', title: 'Knee-High Boots', price: '$499.00', image: 'https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&q=80' },
                { id: 'womens-shoes-r4', title: 'Shoe Care Kit', price: '$49.00', image: 'https://images.unsplash.com/photo-1556906781-9a412961c28c?w=400&q=80' }
            ],
            'womens-accessories': [
                { id: 'womens-accessories-r1', title: 'Oversized Sunglasses', price: '$229.00', image: 'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=400&q=80' },
                { id: 'womens-accessories-r2', title: 'Cashmere Wrap', price: '$279.00', image: 'https://images.unsplash.com/photo-1520903920243-00d872a2d1c9?w=400&q=80' },
                { id: 'womens-accessories-r3', title: 'Hair Accessories Set', price: '$59.00', image: 'https://images.unsplash.com/photo-1596944924616-7b38e7cfac36?w=400&q=80' },
                { id: 'womens-accessories-r4', title: 'Leather Gloves', price: '$119.00', image: 'https://images.unsplash.com/photo-1531120364508-a6b656c3e78d?w=400&q=80' }
            ],
            'womens-bags': [
                { id: 'womens-bags-r1', title: 'Mini Shoulder Bag', price: '$399.00', image: 'https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&q=80' },
                { id: 'womens-bags-r2', title: 'Canvas Tote', price: '$149.00', image: 'https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=400&q=80' },
                { id: 'womens-bags-r3', title: 'Woven Clutch', price: '$199.00', image: 'https://images.unsplash.com/photo-1566150905458-1bf1fc113f0d?w=400&q=80' },
                { id: 'womens-bags-r4', title: 'Bag Charm', price: '$79.00', image: 'https://images.unsplash.com/photo-1611652022419-a9419f74343d?w=400&q=80' }
            ],
            'womens-jewelry': [
                { id: 'womens-jewelry-r1', title: 'Diamond Studs', price: '$899.00', image: 'https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?w=400&q=80' },
                { id: 'womens-jewelry-r2', title: 'Gold Bangle Set', price: '$349.00', image: 'https://images.unsplash.com/photo-1611652022419-a9419f74343d?w=400&q=80' },
                { id: 'womens-jewelry-r3', title: 'Tennis Bracelet', price: '$1,199.00', image: 'https://images.unsplash.com/photo-1599643477877-530eb83abc8e?w=400&q=80' },
                { id: 'womens-jewelry-r4', title: 'Jewelry Box', price: '$129.00', image: 'https://images.unsplash.com/photo-1606760227091-3dd870d97f1d?w=400&q=80' }
            ],
            'womens-handbags': [
                { id: 'womens-handbags-r1', title: 'Bucket Bag', price: '$479.00', image: 'https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=400&q=80' },
                { id: 'womens-handbags-r2', title: 'Chain Wallet', price: '$299.00', image: 'https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&q=80' },
                { id: 'womens-handbags-r3', title: 'Leather Pouch', price: '$149.00', image: 'https://images.unsplash.com/photo-1566150905458-1bf1fc113f0d?w=400&q=80' },
                { id: 'womens-handbags-r4', title: 'Card Holder', price: '$99.00', image: 'https://images.unsplash.com/photo-1627123424574-724758594e93?w=400&q=80' }
            ]
        };

        // Helper: format money
        function money(value) {
            return `$${value.toFixed(2)}`;
        }

        // Load product into view
        function loadProduct(productId) {
            const product = products[productId];
            if (!product) return;

            currentProductId = productId;

            document.getElementById('product-title').textContent = product.title;
            document.getElementById('product-price').textContent = product.price;
            document.getElementById('product-description').textContent = product.description;
            document.getElementById('product-material').textContent = product.material;
            document.getElementById('product-main-image').src = product.image;
            
            // Update breadcrumbs
            document.getElementById('breadcrumb-gender').textContent = product.gender;
            document.getElementById('breadcrumb-category').textContent = product.category;
            document.getElementById('breadcrumb-product').textContent = product.title;
            
            // Store current gender for breadcrumb navigation
            currentGender = product.gender.toLowerCase();

            // Load related products
            loadRelatedProducts(productId);

            // Reset selections
            document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('bg-black', 'text-white'));
            document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('ring-2', 'ring-offset-2', 'ring-black'));
            selectedSize = '';
            selectedColor = '';
            document.getElementById('product-quantity').value = 1;

            showView('product-view');
        }

        // Load related products
        function loadRelatedProducts(currentProductId) {
            const relatedContainer = document.getElementById('related-products-grid');
            relatedContainer.innerHTML = '';

            const related = relatedProducts[currentProductId] || [];

            related.forEach(product => {
                const productCard = `
                    <div class="group cursor-pointer">
                        <div class="aspect-square bg-gray-100 mb-3 overflow-hidden">
                            <img src="${product.image}" alt="${product.title}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        </div>
                        <h3 class="text-sm font-light mb-1">${product.title}</h3>
                        <p class="text-sm font-light text-gray-600">${product.price}</p>
                    </div>
                `;
                relatedContainer.innerHTML += productCard;
            });
        }

        // Navigation
        function showView(viewId) {
            document.querySelectorAll('#main-content > div').forEach(view => {
                view.classList.add('hidden');
            });
            document.getElementById(viewId).classList.remove('hidden');
            currentView = viewId;
            window.scrollTo(0, 0);
        }

        // Update cart count in header
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.qty, 0);
            document.getElementById('cart-count').textContent = `(${count})`;
        }

        // Add item to cart
        function addToCart(productId, size, color, quantity) {
            const product = products[productId];
            if (!product) return;

            const priceNumber = parseFloat(product.price.replace('$', ''));

            // If same product+size+color exists, just bump qty
            const existingIndex = cart.findIndex(
                item => item.id === productId && item.size === size && item.color === color
            );

            if (existingIndex >= 0) {
                cart[existingIndex].qty += quantity;
            } else {
                cart.push({
                    id: productId,
                    title: product.title,
                    price: priceNumber,
                    size,
                    color,
                    qty: quantity,
                    image: product.image
                });
            }

            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCount();
        }

        // Render cart view
        function renderCart() {
            const container = document.getElementById('cart-items-container');
            const emptyMsg = document.getElementById('empty-cart-msg');
            const shippingSection = document.getElementById('shipping-section');
            const checkoutBtn = document.getElementById('checkout-btn');

            cart = JSON.parse(localStorage.getItem("cart")) || [];

            container.innerHTML = "";

            if (cart.length === 0) {
                emptyMsg.classList.remove("hidden");
                shippingSection.classList.add("hidden");
                checkoutBtn.disabled = true;
                document.getElementById('summary-merch').textContent = "$0.00";
                document.getElementById('summary-shipping').textContent = "$0.00";
                document.getElementById('summary-tax').textContent = "$0.00";
                document.getElementById('summary-total').textContent = "$0.00";
                return;
            }

            emptyMsg.classList.add("hidden");
            shippingSection.classList.remove("hidden");
            checkoutBtn.disabled = false;

            // Header row
            const header = document.createElement('div');
            header.className = "grid grid-cols-8 gap-4 pb-3 border-b text-xs uppercase tracking-wider text-gray-500";
            header.innerHTML = `
                <span class="col-span-2">Items</span>
                <span>Color</span>
                <span>Size</span>
                <span>Price</span>
                <span>Qty</span>
                <span>Subtotal</span>
                <span></span>
            `;
            container.appendChild(header);

            cart.forEach((item, index) => {
                const row = document.createElement('div');
                row.className = "grid grid-cols-8 gap-4 py-4 border-b items-center text-sm";
                row.innerHTML = `
                    <div class="col-span-2 flex items-center gap-4">
                        <div class="w-16 h-16 bg-gray-100 overflow-hidden">
                            <img src="${item.image}" class="w-full h-full object-cover" alt="${item.title}">
                        </div>
                        <div>
                            <p class="font-light">${item.title}</p>
                        </div>
                    </div>
                    <span>${item.color}</span>
                    <span>${item.size}</span>
                    <span>${money(item.price)}</span>
                    <span>${item.qty}</span>
                    <span>${money(item.price * item.qty)}</span>
                    <button onclick="removeCartItem(${index})" class="justify-self-start text-xs px-2 py-1 border border-gray-300 hover:bg-gray-100">
                        -
                    </button>
                `;
                container.appendChild(row);
            });

            calculateSummary();
        }

        // Remove an item from cart by index
        function removeCartItem(index) {
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCount();
            renderCart();
        }

        // Calculate summary (merchandise, shipping, tax, total)
        function calculateSummary() {
            if (cart.length === 0) return;

            const merch = cart.reduce((sum, item) => sum + item.price * item.qty, 0);

            const shippingType = document.getElementById('shipping-type').value;
            const dest = document.getElementById('shipping-destination').value;

            let shipping = 0;
            let tax = 0;

            if (merch > 500) {
                shipping = 0;
            } else {
                const shippingCosts = {
                    standard: { CA: 10, US: 25, INT: 35 },
                    express:  { CA: 15, US: 25, INT: 50 },
                    priority: { CA: 20, US: 30, INT: 50 }
                };

                if (shippingType && dest) {
                    shipping = shippingCosts[shippingType][dest];
                }
            }

            if (dest === "CA") {
                tax = merch * 0.05;
            }

            document.getElementById('summary-merch').textContent = money(merch);
            document.getElementById('summary-shipping').textContent = money(shipping);
            document.getElementById('summary-tax').textContent = money(tax);
            document.getElementById('summary-total').textContent = money(merch + shipping + tax);
        }

        // Toast notification
        function showToast(message = 'Item added to bag') {
            const toast = document.getElementById('toast');
            toast.querySelector('p').textContent = message;
            toast.classList.remove('translate-x-full');
            setTimeout(() => {
                toast.classList.add('translate-x-full');
            }, 2000);
        }

        // Nav buttons
        document.getElementById('nav-logo').addEventListener('click', () => showView('home-view'));
        document.getElementById('nav-home').addEventListener('click', () => showView('home-view'));
        document.getElementById('nav-men').addEventListener('click', () => showView('men-view'));
        document.getElementById('nav-women').addEventListener('click', () => showView('women-view'));

        document.getElementById('mobile-nav-home').addEventListener('click', () => { showView('home-view'); toggleMobileMenu(); });
        document.getElementById('mobile-nav-men').addEventListener('click', () => { showView('men-view'); toggleMobileMenu(); });
        document.getElementById('mobile-nav-women').addEventListener('click', () => { showView('women-view'); toggleMobileMenu(); });

        // Cart nav
        document.getElementById('nav-cart').addEventListener('click', () => {
            showView('cart-view');
            renderCart();
        });

        // Category cards
        document.getElementById('category-men').addEventListener('click', () => showView('men-view'));
        document.getElementById('category-women').addEventListener('click', () => showView('women-view'));

        // Product cards - attach event listeners
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', () => {
                    const productId = card.dataset.product;
                    loadProduct(productId);
                });
            });

            updateCartCount(); // initial cart count from localStorage
        });

        // Size selection
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('bg-black', 'text-white'));
                btn.classList.add('bg-black', 'text-white');
                selectedSize = btn.dataset.size;
            });
        });

        // Color selection
        document.querySelectorAll('.color-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('ring-2', 'ring-offset-2', 'ring-black'));
                btn.classList.add('ring-2', 'ring-offset-2', 'ring-black');
                selectedColor = btn.dataset.color;
            });
        });

        // Add to cart button
        document.getElementById('add-to-cart-btn').addEventListener('click', () => {
            if (!currentProductId) return;

            if (!selectedSize || !selectedColor) {
                alert("Please select size and color.");
                return;
            }

            const qty = parseInt(document.getElementById('product-quantity').value, 10) || 1;
            addToCart(currentProductId, selectedSize, selectedColor, qty);
            showToast('Item added to bag');
        });

        // Mobile menu
        const menuToggle = document.getElementById('mobile-menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        const topLine = document.querySelector('.top-line');
        const middleLine = document.querySelector('.middle-line');
        const bottomLine = document.querySelector('.bottom-line');

        function toggleMobileMenu() {
            mobileMenu.classList.toggle('hidden');
            if (!mobileMenu.classList.contains('hidden')) {
                topLine.style.transform = 'rotate(45deg) translateY(4px)';
                middleLine.style.opacity = '0';
                bottomLine.style.transform = 'rotate(-45deg) translateY(-4px)';
            } else {
                topLine.style.transform = 'none';
                middleLine.style.opacity = '1';
                bottomLine.style.transform = 'none';
            }
        }

        menuToggle.addEventListener('click', toggleMobileMenu);

        // Breadcrumb navigation
        document.getElementById('breadcrumb-home').addEventListener('click', () => showView('home-view'));
        document.getElementById('breadcrumb-gender').addEventListener('click', () => {
            if (currentGender === 'men') {
                showView('men-view');
            } else if (currentGender === 'women') {
                showView('women-view');
            }
        });

        // Shipping dropdowns recalc summary
        document.getElementById('shipping-type').addEventListener('change', calculateSummary);
        document.getElementById('shipping-destination').addEventListener('change', calculateSummary);

        // Checkout
        document.getElementById('checkout-btn').addEventListener('click', () => {
            if (cart.length === 0) return;

            showToast('Order placed. Thank you!');
            cart = [];
            localStorage.removeItem("cart");
            updateCartCount();
            renderCart();
            setTimeout(() => showView('home-view'), 500);
        });
    </script>

</body>
</html>
